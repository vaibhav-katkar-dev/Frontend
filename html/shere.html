<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Embed & Share Form</title>
  <script>
   const baseURL = (function() {
  // Get current protocol + host (like http://127.0.0.1:5501 or https://formhit.onrender.com)
  return window.location.protocol + "//" + window.location.host;
})();

console.log("Base URL:", baseURL);


  </script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      background: #f9fafc;
      color: #212529;
    }

    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 16px;
      background-color: #357edd;
      color: white;
    }

    .navbar h2 {
      margin: 0;
      font-size: 18px;
    }

    .back-button {
      background: white;
      color: #357edd;
      border: none;
      padding: 6px 10px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
    }

    .container {
      max-width: 800px;
      margin: 20px auto;
      padding: 1rem;
      text-align: center;
    }

    .code-box {
      background: #f1f3f5;
      padding: 10px;
      border-radius: 6px;
      font-family: monospace;
      font-size: 14px;
      position: relative;
      margin-bottom: 20px;
      word-break: break-word;
    }

    .copy-icon {
      position: absolute;
      top: 10px;
      right: 10px;
      cursor: pointer;
      font-size: 16px;
      color: #555;
      transition: color 0.2s;
    }

    .copy-icon:hover {
      color: #000;
    }

    .preview-toggle {
      margin-bottom: 20px;
    }

    .preview-toggle button {
      padding: 6px 12px;
      margin: 0 5px;
      border: none;
      border-radius: 5px;
      background-color: #357edd;
      color: white;
      cursor: pointer;
    }

    .preview-frame {
      width: 100%;
      max-width: 375px;
      height: 600px;
      border: 1px solid #ccc;
      border-radius: 8px;
      overflow: hidden;
      margin: 0 auto;
    }

    .small {
      max-width: 375px;
    }

    .large {
      max-width: 100%;
    }

   .copy-icon, 
.open-icon {
  cursor: pointer;
margin-left: 50px;
  font-size: 8px;
  color: #000000; /* subtle grey */
  transition: color 0.2s ease, transform 0.2s ease;
}

.copy-icon:hover, 
.open-icon:hover {
  color: #000; /* dark on hover */
  transform: scale(1.1);
}

.copied-tooltip {
  font-size: 9px;
  color: #28a745; /* nice green */
  margin-left: 4px;
  opacity: 0;
  transition: opacity 0.2s ease;
}

.copied-tooltip.show {
  opacity: 1;
}


  </style>
</head>
<body>

  <!-- Inside <body> -->
<div class="navbar">
  <button class="back-button" onclick="history.back()">‚Üê Back</button>
  <h2>Share & Embed Form</h2>
  <div></div>
</div>

<div class="container">

  <!-- üìò How to Use Section -->
  <section style="text-align: left; margin-bottom: 2rem;">
    <h3 style="color:#2c3e50;">üìò How to Use This Widget</h3>
    <p><strong>1. Embed on your website:</strong> Copy the <code>&lt;script&gt;</code> code below and paste it into the <code>&lt;body&gt;</code> of any HTML page on your website where you want the form to appear.</p>
    <p><strong>2. Share the direct link:</strong> Copy the direct URL and share it with users via email, social media, or anywhere online.</p>
    <p><strong>3. Preview the form:</strong> Use the preview toggle below to check how your form looks on mobile and desktop devices.</p>
  </section>

  <!-- Your existing code-boxes and preview follow here -->
  <!-- ... -->
</div>

  <div class="container">
    <div class="code-box">
      <code id="embedCode">
        &lt;script src="${baseURL}/widget.js?formId=68794215d2df1f49d57f9353"&gt;&lt;/script&gt;
      </code>
      <span class="copy-icon" onclick="copyToClipboard('embedCode', 'embedTooltip')">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="lucide lucide-copy">
      <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
      <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
    </svg>
  </span>
      <div id="embedTooltip" class="copied-tooltip">Copied!</div>
    </div>

    <div class="code-box">
  <code id="shareLink">
    ${baseURL}/html/form.html?formId=68794215d2df1f49d57f9353
  </code>

  <!-- Copy Icon -->
  <span class="copy-icon" onclick="copyToClipboard('shareLink', 'linkTooltip')">
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="lucide lucide-copy">
      <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
      <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
    </svg>
  </span>

  <!-- Open Link Icon -->
  <span class="open-icon" onclick="openLink('shareLink')" title="Open link in new tab"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="lucide lucide-external-link">
      <path d="M18 13v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" />
      <polyline points="15 3 21 3 21 9" />
      <line x1="10" y1="14" x2="21" y2="3" />
    </svg></span>

  <div id="linkTooltip" class="copied-tooltip">Copied!</div>
</div>


    <div class="preview-toggle">
      <button onclick="setPreviewSize('small')">üì± Mobile View</button>
      <button onclick="setPreviewSize('large')">üíª PC View</button>
    </div>

    <div class="preview-frame small" id="previewContainer">
      <iframe id="formPreview" src="${baseURL}/html/form.html?formId=68794215d2df1f49d57f9353" width="100%" height="100%" style="border:none;"></iframe>
    </div>
  </div>

  <script>
    function copyToClipboard(elementId, tooltipId) {
      const text = document.getElementById(elementId).innerText;
      navigator.clipboard.writeText(text).then(() => {
        const tooltip = document.getElementById(tooltipId);
        tooltip.classList.add("show");
        setTimeout(() => tooltip.classList.remove("show"), 1000);
      });
    }

    function setPreviewSize(size) {
      const preview = document.getElementById("previewContainer");
      preview.className = "preview-frame " + size;
    }

    // Optional: Make dynamic with formId from query param
    const params = new URLSearchParams(window.location.search);
    const formId = params.get('formId');
    if (formId) {
      const embedScript = `&lt;script src="${baseURL}/js/widget.js?formId=${formId}"&gt;&lt;/script&gt;`;
      const shareUrl = `${baseURL}/html/form.html?formId=${formId}`;

      document.getElementById("embedCode").innerHTML = embedScript;
      document.getElementById("shareLink").innerText = shareUrl;
      document.getElementById("formPreview").src = shareUrl;
    }

    function copyToClipboard(elementId, tooltipId) {
  const text = document.getElementById(elementId).innerText.trim();
  navigator.clipboard.writeText(text).then(() => {
    const tooltip = document.getElementById(tooltipId);
    tooltip.style.opacity = 1;
    setTimeout(() => tooltip.style.opacity = 0, 1500);
  });
}

function openLink(elementId) {
  const link = document.getElementById(elementId).innerText.trim();
  window.open(link, "_blank");
}

  </script>

      <script src="/js/authCheak.js"></script>

</body>
</html>
