<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Embed & Share Form</title>
  <script>
    const baseURL =
  window.location.hostname === "localhost"
    ? "http://localhost:5000"
    : "https://formhit.onrender.com";

  </script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      background: #f9fafc;
      color: #212529;
    }

    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 16px;
      background-color: #357edd;
      color: white;
    }

    .navbar h2 {
      margin: 0;
      font-size: 18px;
    }

    .back-button {
      background: white;
      color: #357edd;
      border: none;
      padding: 6px 10px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
    }

    .container {
      max-width: 800px;
      margin: 20px auto;
      padding: 1rem;
      text-align: center;
    }

    .code-box {
      background: #f1f3f5;
      padding: 10px;
      border-radius: 6px;
      font-family: monospace;
      font-size: 14px;
      position: relative;
      margin-bottom: 20px;
      word-break: break-word;
    }

    .copy-icon {
      position: absolute;
      top: 10px;
      right: 10px;
      cursor: pointer;
      font-size: 16px;
      color: #555;
      transition: color 0.2s;
    }

    .copy-icon:hover {
      color: #000;
    }

    .preview-toggle {
      margin-bottom: 20px;
    }

    .preview-toggle button {
      padding: 6px 12px;
      margin: 0 5px;
      border: none;
      border-radius: 5px;
      background-color: #357edd;
      color: white;
      cursor: pointer;
    }

    .preview-frame {
      width: 100%;
      max-width: 375px;
      height: 600px;
      border: 1px solid #ccc;
      border-radius: 8px;
      overflow: hidden;
      margin: 0 auto;
    }

    .small {
      max-width: 375px;
    }

    .large {
      max-width: 100%;
    }

    .copied-tooltip {
      font-size: 12px;
      color: green;
      margin-top: 4px;
      display: none;
    }

    .show {
      display: inline;
    }
  </style>
</head>
<body>

  <!-- Inside <body> -->
<div class="navbar">
  <button class="back-button" onclick="history.back()">‚Üê Back</button>
  <h2>Share & Embed Form</h2>
  <div></div>
</div>

<div class="container">

  <!-- üìò How to Use Section -->
  <section style="text-align: left; margin-bottom: 2rem;">
    <h3 style="color:#2c3e50;">üìò How to Use This Widget</h3>
    <p><strong>1. Embed on your website:</strong> Copy the <code>&lt;script&gt;</code> code below and paste it into the <code>&lt;body&gt;</code> of any HTML page on your website where you want the form to appear.</p>
    <p><strong>2. Share the direct link:</strong> Copy the direct URL and share it with users via email, social media, or anywhere online.</p>
    <p><strong>3. Preview the form:</strong> Use the preview toggle below to check how your form looks on mobile and desktop devices.</p>
  </section>

  <!-- Your existing code-boxes and preview follow here -->
  <!-- ... -->
</div>

  <div class="container">
    <div class="code-box">
      <code id="embedCode">
        &lt;script src="${baseURL}/widget.js?formId=68794215d2df1f49d57f9353"&gt;&lt;/script&gt;
      </code>
      <span class="copy-icon" onclick="copyToClipboard('embedCode', 'embedTooltip')">üìã</span>
      <div id="embedTooltip" class="copied-tooltip">Copied!</div>
    </div>

    <div class="code-box">
      <code id="shareLink">${baseURL}/Frontend/html/form.html?formId=68794215d2df1f49d57f9353</code>
      <span class="copy-icon" onclick="copyToClipboard('shareLink', 'linkTooltip')">üìã</span>
      <div id="linkTooltip" class="copied-tooltip">Copied!</div>
    </div>

    <div class="preview-toggle">
      <button onclick="setPreviewSize('small')">üì± Mobile View</button>
      <button onclick="setPreviewSize('large')">üíª PC View</button>
    </div>

    <div class="preview-frame small" id="previewContainer">
      <iframe id="formPreview" src="${baseURL}/Frontend/html/form.html?formId=68794215d2df1f49d57f9353" width="100%" height="100%" style="border:none;"></iframe>
    </div>
  </div>

  <script>
    function copyToClipboard(elementId, tooltipId) {
      const text = document.getElementById(elementId).innerText;
      navigator.clipboard.writeText(text).then(() => {
        const tooltip = document.getElementById(tooltipId);
        tooltip.classList.add("show");
        setTimeout(() => tooltip.classList.remove("show"), 1000);
      });
    }

    function setPreviewSize(size) {
      const preview = document.getElementById("previewContainer");
      preview.className = "preview-frame " + size;
    }

    // Optional: Make dynamic with formId from query param
    const params = new URLSearchParams(window.location.search);
    const formId = params.get('formId');
    if (formId) {
      const embedScript = `&lt;script src="${baseURL}/widget.js?formId=${formId}"&gt;&lt;/script&gt;`;
      const shareUrl = `${baseURL}/Frontend/html/form.html?formId=${formId}`;

      document.getElementById("embedCode").innerHTML = embedScript;
      document.getElementById("shareLink").innerText = shareUrl;
      document.getElementById("formPreview").src = shareUrl;
    }
  </script>

</body>
</html>
