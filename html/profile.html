<!DOCTYPE html>
<html>
<head>
    <title>Profile</title>
      <script defer data-domain="form2chat.me" src="https://plausible.io/js/plausible.js"></script>

</head>
<body>
    <h1>My Profile</h1>
    <pre id="profileData"></pre>

      <script src="/js/authCheak.js"></script>
    <script>
        // After auth check passes, fetch user data
        async function loadProfile() {
            const token = localStorage.getItem("token");
            const res = await fetch("https://api.form2chat.me/api/auth/me", {
                headers: { "Authorization": token }
            });
            const data = await res.json();
            document.getElementById("profileData").innerText = JSON.stringify(data, null, 2);
        }

        // Delay execution so authCheck finishes first
        setTimeout(loadProfile, 500);
    </script>
</body>
</html>
